<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loading Trackle™️</title>
    <meta name="theme-color" content="#ffffff" />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://cdn.glitch.global/8357f303-720f-4e93-ab5a-fafe557be39c/Underground%20Roundel.ico?v=1697160561957"
    />
    <style>
      html,
      body,
      iframe {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #ffffff;
        font-family: Arial, sans-serif;
        color: #333;
      }
    </style>
    <meta http-equiv="refresh" content="3;url=home.html" />
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/service-worker.js")
          .then((registration) => {
            console.log(
              "Service Worker registered with scope:",
              registration.scope
            );
          })
          .catch((error) => {
            console.log("Service Worker registration failed:", error);
          });
      }

      document.addEventListener("DOMContentLoaded", function () {
        const baseTitle = "Loading Trackle™️";
        const loadingDots = ["", ".", "..", "..."];
        let dotIndex = 0;

        function updateTitle() {
          document.title = baseTitle + loadingDots[dotIndex];
          dotIndex = (dotIndex + 1) % loadingDots.length;
        }

        setInterval(updateTitle, 500);

        function checkConnection() {
          if (!navigator.onLine) {
            document.getElementById("iframeContainer").style.display = "none";
            document.getElementById("offlineMessage").style.display = "block";
          }
        }

        window.addEventListener("offline", checkConnection);

        checkConnection();
      });
    </script>
  </head>
  <body>
    <div id="iframeContainer">
      <iframe
        src="https://jamiehaywood.com/loadingroundel/"
        frameborder="0"
      ></iframe>
    </div>
    <div id="offlineMessage" style="display: none">
      <p>You are offline. Please check your internet connection.</p>
    </div>
  </body>
</html>
